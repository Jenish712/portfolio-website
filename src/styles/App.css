@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme tokens */
@layer base {
  :root {
    /* Light theme: professional green palette with AA contrast */
    --background: 0 0% 100%;
    --foreground: 222 47% 11%;

    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    --primary: 160 84% 26%; /* ~#047857 */
    --primary-foreground: 210 40% 98%; /* ~#F8FAFC */

    --secondary: 210 40% 96%; /* ~#F1F5F9 */
    --secondary-foreground: 222 47% 11%;

    --muted: 215 16% 94%; /* ~#E5E7EB */
    --muted-foreground: 215 16% 35%; /* ~#6B7280 */

    --accent: 160 64% 35%; /* ~#059669 */
    --accent-foreground: 210 40% 98%;

    --destructive: 0 72% 42%; /* ~#B91C1C */
    --destructive-foreground: 210 40% 98%;

    --border: 214 32% 91%; /* ~#E2E8F0 */
    --input: 214 32% 91%;
    --ring: 160 84% 26%;

    /* Optional interactive states */
    --primary-hover: 160 84% 22%;
    --secondary-hover: 210 40% 92%;
    --accent-hover: 160 64% 30%;
    --destructive-hover: 0 72% 37%;

    --radius: 0.5rem;
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 240 5.9% 10%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 4.9% 83.9%;
  }
}

/* Base resets */
@layer base {
  html { overflow-x: hidden; }
  * { @apply border-border; }
  body { @apply bg-background text-foreground; overflow-x: hidden; }
}

/* Utilities */
@layer utilities {
  /* Line clamp helpers */
  .line-clamp-2 { display: -webkit-box; line-clamp: 2; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  .line-clamp-3 { display: -webkit-box; line-clamp: 3; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

  /* Touch and scroll */
  .touch-manipulation { touch-action: manipulation; }
  html { scroll-behavior: smooth; }

  /* Focus ring utility using token color */
  .focus-ring { @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2; }

  /* Code block scrollbar styling */
  .code-scroll { scrollbar-width: thin; scrollbar-color: rgba(5,150,105,.6) rgba(75,85,99,.3); max-width: 100%; overflow-x: auto !important; }
  .code-scroll { max-width: calc(100vw - 4rem); -webkit-overflow-scrolling: touch; }
  @media (max-width: 768px) { .code-scroll { max-width: calc(100vw - 2rem); } }
  .code-scroll::-webkit-scrollbar { height: 8px; width: 8px; }
  .code-scroll::-webkit-scrollbar-track { background: rgba(75,85,99,.3); border-radius: 4px; }
  .code-scroll::-webkit-scrollbar-thumb { background: rgba(5,150,105,.6); border-radius: 4px; }
  .code-scroll::-webkit-scrollbar-thumb:hover { background: rgba(5,150,105,.8); }
}

/* AI Matrix Loader styles */
.ai-matrix-loader { width: 120px; height: 160px; margin: 30px auto; position: relative; perspective: 800px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; }
.ai-matrix-loader .digit { color: #00ff88; font-family: monospace; font-size: 18px; text-align: center; text-shadow: 0 0 5px #00ff88; animation: matrix-fall 2s infinite, matrix-flicker 0.5s infinite; opacity: 0; }
.ai-matrix-loader .digit:nth-child(1){animation-delay:.1s;} .ai-matrix-loader .digit:nth-child(2){animation-delay:.3s;} .ai-matrix-loader .digit:nth-child(3){animation-delay:.5s;} .ai-matrix-loader .digit:nth-child(4){animation-delay:.7s;} .ai-matrix-loader .digit:nth-child(5){animation-delay:.9s;} .ai-matrix-loader .digit:nth-child(6){animation-delay:1.1s;} .ai-matrix-loader .digit:nth-child(7){animation-delay:1.3s;} .ai-matrix-loader .digit:nth-child(8){animation-delay:1.5s;}
.ai-matrix-loader .glow { position: absolute; inset: 0; background: radial-gradient(circle, rgba(0,255,136,.12) 0%, transparent 70%); animation: matrix-pulse 2s infinite; pointer-events: none; }

@keyframes matrix-fall { 0%{transform:translateY(-50px) rotateX(90deg); opacity:0;} 20%,80%{transform:translateY(0) rotateX(0); opacity:.85;} 100%{transform:translateY(50px) rotateX(-90deg); opacity:0;} }
@keyframes matrix-flicker { 0%,19%,21%,100%{opacity:.85;} 20%{opacity:.25;} }
@keyframes matrix-pulse { 0%,100%{opacity:.35;} 50%{opacity:.7;} }

@layer utilities {
  /* Animated gradient utility */
  .animate-gradient-x { background-size: 200% 200%; animation: gradient-x 8s ease infinite; }
  @keyframes gradient-x { 0%{background-position:0% 50%;} 50%{background-position:100% 50%;} 100%{background-position:0% 50%;} }

  /* Subtle green glow for CTAs/cards */
  .glow-emerald { box-shadow: 0 0 0 1px rgba(5,150,105,.35), 0 12px 30px rgba(5,150,105,.08); }
}

@layer utilities {
  /* Animated circuit traces */
  .circuit-traces { background-image: repeating-linear-gradient(120deg, transparent 0px, transparent 98px, rgba(5,150,105,.07) 98px, rgba(5,150,105,.07) 102px); background-size: 300px 300px; animation: circuit-traces 28s linear infinite; }
  @keyframes circuit-traces { from{background-position:0 0;} to{background-position:600px 0;} }

  /* Sweeping highlight */
  .circuit-sweep { background: linear-gradient(90deg, transparent 0%, rgba(5,150,105,.06) 40%, rgba(5,150,105,.10) 50%, rgba(5,150,105,.06) 60%, transparent 100%); mix-blend-mode: screen; opacity:.25; animation: circuit-sweep 12s ease-in-out infinite; }
  @keyframes circuit-sweep { 0%{transform:translateX(-40%);} 50%{transform:translateX(40%);} 100%{transform:translateX(-40%);} }

  /* Pulsing 'LED' nodes */
  .node-pulse { position:absolute; width:6px; height:6px; border-radius:9999px; background: rgba(5,150,105,.9); box-shadow:0 0 10px rgba(5,150,105,.6); animation: node-blink 3.2s ease-in-out infinite; }
  @keyframes node-blink { 0%,100%{opacity:.12; transform:scale(.9);} 50%{opacity:.9; transform:scale(1.1);} }
}
